package com.aashdit.fms.utils;

import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.aashdit.fms.model.MetaData;
import com.aashdit.fms.repository.MetaDataRepository;

import lombok.extern.slf4j.Slf4j;

@Slf4j
@Component
public class LogUtils {
	
	@Autowired
	private MetaDataRepository metaDataRepository;
	
	  public String getCatLinaFilePath() {
		    String catLinaFilePath = "";
		    try {
		      Optional<MetaData> metaData = this.metaDataRepository.getByKey("CATALINA_LOG_FILE_PATH");
		      if (metaData.isPresent() && ((MetaData)metaData.get()).getMetaDataType().equals(MetaDataType.STRING))
		        catLinaFilePath = ((MetaData)metaData.get()).getMetaData(); 
		      	log.info("RETRIVE CATELINA LOG FILE PATH FROM DB==>"+ catLinaFilePath);
		    } catch (Exception e) {
		      log.error("Exception Occured in LogViewServiceImpl at getCatLinaFilePath() ", e);
		    } 
		    return catLinaFilePath;
		  }

}
