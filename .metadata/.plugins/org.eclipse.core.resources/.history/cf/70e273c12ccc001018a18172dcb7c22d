<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec"
	uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />
<script src="${contextPath}/assets/js/plugin/jquery.autocomplete.min.js"></script>
<script src="${contextPath}/assets/appJs/validation/party-master.js"></script>

<style>

</style>

<script>
$(function()
{
	$('#datatable-default').dataTable({
 		"bSort": false,
 		"autoWidth": false
	});
})
</script>
<div class="breadcrumb_conatiner">
    <div class="col-md-6">
        <h4 class="change-color">Measurement List</h4>
    </div>
    <div class="col-md-6">
        <nav aria-label="breadcrumb">
	        <ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="${contextPath}/home" title="Home"><i class="fa fa-home"></i></a></li>
				<li class="breadcrumb-item active" aria-current="page">Measurement List</li>
			</ol>
        </nav>
     </div>
</div>

<div class="row">
	<div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h6 class="card-title">Measurement List</h6>
            </div>
            <div class="card-body">
            <div class="row">
            	<%@ include file="/WEB-INF/views/entityIdAndUserLevelListDrp.jsp"%>


                <div class="col-md-12">
                   <table class="table table-bordered exportbtn" id="datatable">
                        <thead>
                            <tr>
                                <th >Sl. #</th>
                                <th>Measuremnet No.</th>
                                <th>BOQ No.</th>
                                <th>WorkOrder No.</th>
                                <th>Created On</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <c:forEach items="${measurementBookList}" var="msrmnt" varStatus="count">
                                <tr class="gradeX">
                                    <td>${count.count}</td>
                                    <td>${msrmnt.measurementCode}</td>
                                    <td>${msrmnt.boqMstId.boqCode}</td>
                                    <td>${msrmnt.boqMstId.workorderId.workOrderNo}</td>
                                    <td><c:choose>
                                        <c:when test="${msrmnt.createdOn ne null}">
                                          <fmt:formatDate value="${msrmnt.createdOn}" pattern="dd/MM/yyyy" />
                                        </c:when>
                                        <c:otherwise>
                                          NA
                                        </c:otherwise>
                                      </c:choose></td>
                                    <td style="text-align: center;">
                                    <button type ="button" onclick="editMsrmnt(${msrmnt.msmntMstId})" class="btn btn-success">
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                    </button>
                                     </td>
                                </tr>
                            </c:forEach>
                        </tbody>
                   </table>
                </div>
			</div>
		</div>
	</div>
</div>
</div>

<form action="${contextPath}/boqMeasurement/edit" method="get" id="editmst">
<input type="hidden"  name="measurementId"  id="measurementIdHd">
</form>
<script>



function editMsrmnt(measurementId){
	
	 $('#measurementIdHd').val(measurementId);
	
	if(validateForm()){
		 if(encryptFormData('editmst', tableOrTbodyIDS, tableOrTbodyKeys)){
				 confirmation('editmst');
			 }
		}
	
}
 
</script>