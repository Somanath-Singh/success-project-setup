<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix = "fn" uri = "http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/functions" prefix = "fn" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />
<sec:authentication var="principal" property="principal" />
<c:set var="chargeRow" value="0" />
<style>
@media print {
body{
        background: #fff !important;
    }
	.no-print {
		display: none;
	}
	input {
		border-color: transparent !important;
	}
	select {
		border-color: transparent !important;
	}
	td #mrnDate {
		border-color: transparent !important;
		display: none;
	}
	 td textarea {
		border-color: transparent !important;
		resize: none;
	}
	td #doc{
	display: none;
	}
	.btnholder,.fa-calendar-week{
	display: none;
	}
	.invoice-form table thead th,.detailsheading {
        background: transparent !important;
        color: #000 !important;
    }
    .detailsheading{
        font-weight: 700;
        dest-decoration: underline !important;
    }
    .borderNone{
            border: none !important;
        }
        .card-header{
                padding-left: 0 !important;
            }

}
.print-div {
	width: 750px;
	padding: 19px;
	background: #fff;
	margin-left: auto;
	margin-right: auto;
	margin-top: 10px;
	height: 700px;
}

.print-div td input, .print-div td select {
	width: 76px;
	border: 1px solid #ddd;
	border-radius: 6px;
}

.print-div td textarea {
	border: 1px solid #ddd;
}

.print-div td textarea {
	border: 1px solid #ddd;
}
table th {
        font-size: 13px;
        font-weight: 600 !important;
        line-height: 22px;
    }
table td {
    font-size: 13px !important;
    font-weight: 500 !important;
    color: #312e2e !important;
    line-height: 20px !important;
    letter-spacing: 0.5px;
    padding-left: 10px;
}
table tr{
vertical-align: baseline;
}

input:focus {
	outline: none;
}

textarea:focus {
	outline: none;
}
table thead tr th {
    padding: 5px !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    color: #0f0e47 !important;
}
table td{
    padding: 5px;
}
</style>
<section>
	<div class="mt-2">
		<div class="borderNone invoice-form" style="width: 900px; margin: auto; background: #fff; position: relative;padding: 10px;border: 1px solid #ddd;">
            	<div style="float:left; width:50%">
            	    <h3 style="margin-bottom: 5px; margin-top: 5px; color: #000;font-weight: 600; padding:10px 0;">Purchase Order</h3>
                </div>
                <div style="float:right; width:50%;text-align: right;">
                    <c:choose>
                        <c:when test="${!empty icon}">
                            <img src="${contextPath}/document/view-documents?doc=${icon}&module=ICON" alt="logo" class="logo" style="width: 50px;" />
                        </c:when>
                        <c:otherwise>
                            <img src="${contextPath}/assets/images/favicon.png" alt="logo" class="logo" style="width: 50px;" />
                        </c:otherwise>
                    </c:choose> 
                </div>
                <div style="clear:both; margin-bottom:0"></div>
                     <div class="card-header" style="position: relative;background: #00ffff !important; ">
                        <button type="button" class="no-print" style="float: right;position: absolute;top: -3px;right: 10px;border: none;background: none;font-size: 26px;color: #5f7dcb;" onclick="window.print()">
                            <i class="fa-solid fa-print"></i>
                        </button>

                        <h4 class="detailsheading" style=" color: #0f0e47; font-size: 16px;padding-left: 2px; margin-bottom: 0px; margin-top: 0;font-weight: 600;">Contact details :</h4>
                     </div>
                <div style="clear:both; margin-bottom:0"></div>

                <div style="width:50%; float: left;padding: 10px 0;">
                    <table style="font-size: 12px; line-height:15px;">
                        <tr>
                            <th style="width:40%">Vendor Name :</th>
                            <td style="width:60%">${po.assetVendor.vendorName }</td>
                        </tr>
                        <tr>
                            <th style="width:40%">GSTIN :</th>
                            <td style="width:60%"> ${po.assetVendor.gstNo }</td>
                        </tr>

                        <tr>
                            <th style="width:40%">Phone No. :</th>
                            <td style="width:60%">${po.assetVendor.mobileNo }</td>
                        </tr>
                        <tr>
                            <th style="width:40%">Email :</th>
                            <td style="width:60%">${po.assetVendor.email }</td>
                        </tr>
                        <tr style="vertical-align: top;">
                            <th style="width:40%">Address :</th>
                            <td style="width:60%"> ${po.assetVendor.vendorAddress }</td>
                        </tr>
                        <tr>
                            <th style="width:40%">POC :</th>
                            <td style="width:60%">${po.assetVendor.pointOfContact }</td>
                        </tr>
                        <tr>
                            <th>Contact No. :</th>
                            <td>${po.assetVendor.contactNumber }</td>
                        </tr>
                    </table>
                </div>
                <div style="width:50%; float: right;padding: 10px 0;">
                    <table
                        style="font-size: 12px; line-height:15px;">
                        <tr>
                            <th style="width:40%">PO Ref :</th>
                            <td style="width:60%">${po.poNo}</td>
                        </tr>
                        <tr>
                            <th style="width:40%">PO Date :</th>
                            <td style="width:60%"><fmt:formatDate value='${po.poReceiptGeneratedDate}' pattern='dd/MM/yyyy'/></td>
                        </tr>
                        <tr>
                            <th style="width:40%">Quote Ref :</th>
                            <td style="width:60%">${po.rfqQuote.quoteNo}</td>
                        </tr>
                        <tr>
                            <th style="width:40%">Quote Date :</th>
                            <td style="width:60%"><fmt:formatDate value='${po.rfqQuote.rfqApprovedDate}' pattern='dd/MM/yyyy'/></td>
                        </tr>
                        <tr>
                            <th style="width:40%">Currency :</th>
                            <td style="width:60%">${po.currency.currencyShortName}</td>
                        </tr>
                        <tr>

                        </tr>
                    </table>
                </div>
            <div style="clear: both; margin-bottom:30px;"></div>
            <table class="t-inner-data" style="font-size: 12px; width:100%; ">
                <thead>
                    <tr  style="background: #00ffff !important;color: #0f0e47 !important;border-bottom: 1px solid #ebebeb;">
                        <th style="width:65px">Sl. no.</th>
                        <th style="width:250px">Sub Category</th>
                        <th style="width:250px">Item name</th>
                        <th>Item Code.</th>
                        <th>Quantity</th>
                        <th style="width:100px;text-align:right">Unit Price</th>
                        <th style="text-align:right">Discount(%)</th>
                        <th style="text-align:right">Tax(%)</th>
                        <th style="text-align:right">Total</th>
                    </tr>
                </thead>
                <tbody>
                   	<c:forEach items="${po.poLines}" var="poLine" varStatus="count">
                   		<tr>
	                   		<td>${count.count}</td>
	                   		<td>${poLine.item.subCategoryName}</td>
	                   		<td>${poLine.item.itemName}</td>
	                   		<td>${poLine.item.itemCode}</td>
	                   		<td style="text-align:right">${poLine.supplierQuantity }</td>
	                   		<td style="text-align:right"><fmt:formatNumber value="${poLine.unitPrice}" pattern="0.00"/></td>
	                   		<td style="text-align:right">${poLine.discountRate }</td>
	                   		<td style="text-align:right">${poLine.taxRate }</td>
	                   		<td style="text-align:right"><fmt:formatNumber value="${poLine.totalAmount }" pattern="0.00"/></td>
                   		</tr>
                   	</c:forEach>
                </tbody>

                <tfoot style="line-height:13px; border-top:#ddd 1px solid">
                    <tr>
                        <th colspan="8" style="text-align: right; padding-right: 12px; padding:5px; border: none;">Sub Total :</th>
                        <td style="border: none;   text-align: right;" class="boldfnt"><fmt:formatNumber value="${po.totSubTot }" pattern="0.00"/></td>
                    </tr>
                    <tr>
                        <th colspan="8" style="text-align: right; padding-right: 12px; padding:5px; border: none;">Total Discount :</th>
                        <td style="border: none;    text-align: right;" class="boldfnt"><fmt:formatNumber value="${po.totDis }" pattern="0.00"/></td>
                    </tr>
                    <tr>
                        <th colspan="8" style="text-align: right; padding-right: 12px; padding:5px; border: none;">Total Tax :</th>
                        <td style="border: none;   text-align: right;" class="boldfnt"><fmt:formatNumber value="${po.totTax }" pattern="0.00"/></td>
                    </tr>
                    <c:if test="${not empty po.lstAddCost}">
                    	<c:forEach items="${po.lstAddCost}" var="cst">
                    		<tr>
		                       <th colspan="8" style="text-align: right; padding-right: 12px; padding:5px; border: none;"><strong>${cst.addCostName} :</th>
		                       <td style="border: none;   text-align: right;" class="boldfnt"><fmt:formatNumber value="${cst.addCost}" pattern="0.00"/></td>
		                   </tr>
                    	</c:forEach>
                    </c:if>

                    <tr>
                        <td colspan="7" style="font-weight:600; font-size:16px; font-style:italic; text-align:left"><Strong>In words: </strong><span id="totalInWord"></span></td>
                        <th style="text-align: right; padding:5px; border: none;">Total :</th>
                        <td style="border: none;    text-align: right;" class="boldfnt"><fmt:formatNumber value="${po.grndTot }" pattern="0.00"/> <input type="hidden" id="grndTot" value="<fmt:formatNumber value='${po.grndTot }' pattern='0.00'/>"> </td>
                    </tr>
                </tfoot>
            </table>

<hr>
            <table class="table-3" style="width: 100%; margin-top: 5px; font-family: sans-serif; font-size: 12px; line-height: 23px;">
                <tbody style="line-height: 18px;">
                    <tr>
                        <td style="width: 60%;">
                            <h4 style="font-size: 14px; margin-bottom: 0;font-weight: 600;">For International Shipments</h4>
                            <b>Documents required</b>
                            <div class="tmClass">
                            	<ol style="list-style: none;padding: 0 0 0 12px;list-style: decimal; position: relative;">
                            		<li>Invoice in original (4 copies) </li>
                                    <li>Packing list in original (4 copies) </li>
                                    <li>Bill of lading / Air way bill (3 sets) in original plus 1 copy. </li>
                                    <li>Insurance certificate in original </li>
                            	</ol>
                            </div>   
                        </td>
                        <td style="width: 60%;">
                            <h4 style="font-size: 14px; margin-bottom: 0;font-weight: 600;">Consignee Address:</h4>
                            <b>Aashdit Technology</b><br>
                            	Reg. No.:C-0947/2015,4th Floor,G.mall <br>
                          	  	Raghunathpur KIIT,Male-20094<br>
                          	  	Odisha, Pin Code:751024<br>
                          	<b style="font-size: 12px;">GST:</b> 1060967GST501 
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <p style="margin-top: 10px;"></p>
                            <p><b>Terms and Conditions:</b></p>
                            <div class="tmClass">
                            	<ol style="list-style: none;padding: 0 0 0 12px;list-style: decimal; position: relative;">
                            		<li>Goods delivered not in accordance with specifications shall be returned at supplier's expense and are not to be replaced with any substitutions without the prior consent and/or approval.</li>
                                    <li>In case of delay of inability to ship the goods ordered for reason beyond  the control of the supplier, notice be served to us within (5) days upon receipt of the order. </li>
                                   	<li>Deliveries will be accepted subject to count, weight and specifications given. </li>
                                    <li>Invoices and delivery notes must stipulate this Purchase Order Number.</li>
                            	</ol>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="footer-fix-table" style="width: 100%;">
                <tfoot>
                    <tr>
                        <th colspan="2">
                            <ul style="list-style: none;padding: 0;display: flex; justify-content: space-between; align-items: flex-end; font-size: 12px;color: #000;">
                                <li style="margin-top: 45px;"><small style="display: block;">&nbsp; </small> Prepared By </li>
                                <li style="margin-top: 45px;">Approved By </li>
                                <li style="margin-top: 45px;">Authorized By </li>
                            </ul>
                        </th>
                    </tr>
                    <tr style="background: #8483c7 !important; font-size: 12px;color: #fff;">
                        <th colspan="2" style="text-align:center;padding: 8px 0;  line-height: 16px;">
                            <p style="margin: 5px 0 0 0;">If you have any question about this price quote,please inform us at</p>
                            <p style="margin: 0 0 5px 0;">demo@gmail.com or call us at 2323432432</p>
                            <h4 style="margin: 0;">Thank You !!!</h4>
                        </th>
                    </tr>
                </tfoot>
            </table><div style="clear: both; margin-bottom:40px;"></div>
        </div>
	</div>
</section>
<script>
$(document).ready(function() {
    var amount=$("#grndTot").val();
    amount=parseFloat(amount).toFixed(2);
    let fstVal = amount.split(".")[0];
    		let secVal = amount.split(".")[1];
    		let finalWord = '';
    		if(secVal == undefined || secVal == '' || secVal == '00' || secVal == '0'){
    			finalWord = NumInWords(fstVal) + " only";
    		}else{
    			finalWord = NumInWords(fstVal) + " and " + NumInWords(secVal) + " cents only";
    		}
    		$("#totalInWord").text(finalWord);
});
</script>