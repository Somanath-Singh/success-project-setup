<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix = "fn" uri = "http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/functions" prefix = "fn" %>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />

<%-- <%String firstName = (String) session.getAttribute("firstName_session"); --%>
<%--     System.out.println("DEBUG: firstName_session = " + firstName); %> --%>


    <header>
      <div class="container">
        <div class="row">
          <div class="col-lg-6">
                <div class="logo-section">
                    <img src="${contextPath}/assets/img/odishaLogo.svg" alt="">
                    <div>
	                    <h3 class="website-name mb-0">Guest Faculty Recruitment Portal</h3>
	                    <p> <small> Department of Higher Education, Government of Odisha</small></p>
                    </div>
                </div>
          	</div>
	        <div class="col-md-6 d-flex justify-content-between align-items-center">
	            <h3 style="color: #5f6061; z-index: 1; font-size: 24px; font-weight: 900 !important; font-family: Roboto, sans-serif; letter-spacing: 1px;">Welcome <span class="fw-bolder" style="color: #562208; font-size: 26px;">${sessionScope.firstName_session}</span></h3>
		        <div class=" d-flex gap-3">
			        <div class="nav-items dropdown d-flex justify-content-end" style="align-items: center;flex-direction: column;">
			        	<a class="nav-links" href="${contextPath}/my-profile" id="Submenu-Dropdown" role="button"  style="box-shadow: 0 0 16px 0 #fff; width: 40px; border-radius: 50px;" class="">
	                    	<img src="${contextPath}/loginPage/images/profile_picture.png" style="width: 100%; object-fit: cover;">
	                    </a>
	                      <span style="color: #562208; font-size: 14px; font-weight: 600;">My Profile</span>
			        </div>
			        <div class="nav-items dropdown d-flex justify-content-end" style="align-items: center;flex-direction: column;">
			        	<a  href="#" id="btnLogout" role="button" style="box-shadow: 0 0 16px 0 #fff; width: 40px; border-radius: 50px;">
	                    	<img src="${contextPath}/loginPage/images/shutdown.png" style="width: 100%; object-fit: cover;"><br>
	                    </a>
	                    <span style="color: #562208; font-size: 14px; font-weight: 600;">Logout</span>
			        </div>
			    </div>
	        </div>
        </div>
      </div>
    </header>
    <form method="post" action="${contextPath}/umt/logout" id="frmLogout">
	<input type="hidden" name="${_csrf.parameterName}"
		value="${_csrf.token}" /> <input type="submit" style="display: none" />
</form>

<script>
			$(function(){
        $('#btnLogout').click(function() {
              // Display the confirmation dialog using bootbox
              bootbox.confirm({
                  message: "Are you sure you want to log out?",
                  buttons: {
                      confirm: {
                          label: 'Yes',
                          className: 'btn-success'
                      },
                      cancel: {
                          label: 'No',
                          className: 'btn-danger'
                      }
                  },
                  callback: function(result) {
                      if (result) {
                          // If the user clicks "Yes", submit the logout form
                          $('#frmLogout').submit();
                      } else {
                          // If the user clicks "No", do nothing
                          console.log('Logout canceled');
                      }
                  }
              });
          });

				
				$('#siteLangSelector').change(function(){
					const lang = $(this).val();
					switchLanguage(lang);
				});
			});
</script>