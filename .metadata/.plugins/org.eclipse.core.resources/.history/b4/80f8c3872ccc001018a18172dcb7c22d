<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix = "fn" uri = "http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/functions" prefix = "fn" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />
<script src="${contextPath}/assets/appJs/validation/common-utils.js"></script>
<sec:authentication var="principal" property="principal" />
<c:set var="roleCode" value="${principal.primaryRole.roleCode}"/>
 
 
 
<div class="breadcrumb_conatiner">
              <div class="col-md-6">
                <h4 class="change-color">Common Facility</h4>
              </div>
              <div class="col-md-6">
                <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="${contextPath}/home">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Add Common Facilities</li>
                </ol>
                </nav>
              </div>
            </div>
    
       
<div class="card">
    
    
    <div class="card-header"><h5 class="card-title">Add Common Facilities</h5></div>
    <div class="card-body">
    <form action="${contextPath}/facilityManagement/saveCommonFacilities" method="post" id="saveFormId" class="row">
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
        <input type="hidden" name="id" value="${clgWiseCommonFacilities.id}" id="facilityId" />

        <div class="form-group col-md-2">
            <label class="required">Parking space </label>
            <input type="text" class="form-control form-control-sm" id="parkingSpaceId" name="parkingSpace" maxlength="30" value="${clgWiseCommonFacilities.parkingSpace}">
        </div>
        
        <div class="form-group col-md-2">
			<label class="required" >Boundary Wall :</label>
			<select class="form-select" id="boundaryWallId" name="boundaryWall">
				<option value=""><spring:message code="label.common.select"></spring:message></option>
				<option value="1" ${clgWiseCommonFacilities.boundaryWall eq true ? 'selected':''}>Yes</option>
				<option value="0" ${clgWiseCommonFacilities.boundaryWall eq false ? 'selected':''}>No</option>
			</select>
		</div>
		
		<div class="form-group col-md-2">
			<label class="required" >Internet Connectivity :</label>
			<select class="form-select" id="internetConnectivityId" name="internetConnectivity">
				<option value=""><spring:message code="label.common.select"></spring:message></option>
				<option value="1" ${clgWiseCommonFacilities.internetConnectivity eq true ? 'selected':''}>Yes</option>
				<option value="0" ${clgWiseCommonFacilities.internetConnectivity eq false ? 'selected':''}>No</option>
			</select>
		</div>
        
        <div class="form-group col-md-4 text-left">
            <button type="button" class="btn btn-submit searchdiv" style="margin-left: 8px;" onclick="submitForm('${empty clgWiseCommonFacilities.id ? 'SAVE' : 'UPDATE'}')" >${empty clgWiseCommonFacilities.id ? 'Submit' : 'Update'}</button>
            <button type="button" class="btn btn-back searchdiv" style="margin-left: 8px;" onclick="history.back()">Back</button>
        </div>
    </form>
</div>
</div>


<div class="card cardContainerNotFirst">
 <div class="card-header"><h5 class="card-title">Facilities List</h5></div>
	 <div class="card-body">

		<table class="datatable table table-striped table-bordered exportbtn">
	    	<thead>
		        <tr>
		            <th>Sl.No</th>
		            <th>Parking Space</th>
		            <th>Boundary Wall</th>
		            <th>Internet Connectivity</th>
		            <th>Action</th>
		        </tr>
	    	</thead>
	    	<tbody>
		       <c:forEach items="${clgWiseCommonFacilitiesList}" var="clgWiseCommFacList" varStatus="count">
		            <tr>
		                <td>${count.count}</td>
		                <td>${clgWiseCommFacList.parkingSpace}</td>
		                <td>${clgWiseCommFacList.boundaryWall}</td>
		                <td>${clgWiseCommFacList.internetConnectivity}</td>
		                <td>
						 <a href="${contextPath}/facilityManagement/editCommonFacilities?hdnId=${clgWiseCommFacList.id}"class="btn btn-primary" title="edit">
								 <i class=" fa fa-pen " aria-hidden="true"></i></a> 
					    </td>
		            </tr>
		        </c:forEach>
	    	</tbody>
		</table>
	</div>
</div>

<script>
function submitForm(status) {
    if ($("#parkingSpaceId").val().trim() == "") {
        bootbox.alert("Please provide parking space.");
        $("#parkingSpaceId").val('');
        return false;
    } else if ($("#boundaryWallId").val().trim() == "") {
        bootbox.alert("Please provide boundaryWall details.");
        $("#boundaryWallId").val('');
        return false;
    } else if ($("#internetConnectivityId").val().trim() == "") {
        bootbox.alert("Please provide internet connectivity details.");
        $("#internetConnectivityId").val('');
        return false;
    } else { var message = status === 'SAVE' ? 'save' : 'update';
	 bootbox.confirm("Do you want to "+message+" common facility details ?", function (result) {
            if (result) {
                showLoader();
                $("#saveFormId").submit();
            }
        });
    }
}

</script>


