<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
 <jsp:useBean id="utils" class="com.aashdit.fams.utils.ApplicationStringUtilsFams"/> 
<%@ taglib prefix="fn" uri = "http://java.sun.com/jsp/jstl/functions" %>
<link rel="stylesheet" href="resources/stylesheets/financialaccounting/fa-common-report-style.css" />
<link rel="stylesheet" href="resources/stylesheets/financialaccounting/fa-common-styles.css" />

<script src="../assets/javascripts/common.js"></script>
<script src="../assets/javascripts/incomeAndExpenditure.js"></script>
<div class="breadcrumb_conatiner">
	<div class="col-md-6">
		<h4 class="change-color">${R1RptName}</h4>
	</div>
	<div class="col-md-6">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="${contextPath}/home"><i class="fa fa-home"></i></a></li>
				<li class="breadcrumb-item active" aria-current="page">${R1RptName}</li>
			</ol>
		</nav>
	</div>
</div>
<div class="row">
	<div class="col-md-12">
		<div class="card">
			<div class="card-header">
				<h5 class="card-title">${R1RptName}</h5>
			</div>
			<div class="card-body" id="partyDtlsInRequest">
                                    <div class="row">

		<form class="form-horizontal form-bordered" id="rptGSTR1" action="../gstRpt/GR1.htm" method="post">
					<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
						<input type="hidden" name="R1RptType" value="${R1RptType}" /> 
						<input type="hidden" name="company" id="officeId2" />
					<c:set var="divCodeName" value="(00) Corporate"></c:set>
							<div class="row"> <!-- style="margin-left: -25px; margin-right: -25px;" -->
								<%-- <div class="col-md-3 col-sm-3">
									<div class="form-group">
										<label class="col-md-12 required" for="inputDefault">IDCO GSTIN</label>
										<div class="col-md-12">
											<select class="form-control form-select selectpicker" data-live-search="true" name="idcoGSTIN" id="idcoGSTIN" >
												<c:forEach items="${GSTINList}" var="list">
													<option value="${list.idcoGstNo}" ${list.idcoGstNo eq selIdcoGSTIN ? "selected" : ''}>
  														${list.idcoGstNo} &nbsp;&nbsp;&nbsp;&nbsp; (${list.stateId.stateName})
													</option>

												</c:forEach>
											</select>
										</div> 
									</div>
								</div>  --%>
								 <div class="col-md-1 col-sm-1">
									<div class="form-group">
									<label class="col-md-12 required" for="cboMonth"><spring:message code="LAND.ALT.LANDRENEWAL.YEAR" /></label>
										<div class="col-md-12">
											<select class="form-control "  name="reportYear" id="reportYear" onchange="getStartAndEndDateOfMonth();" >
												<c:set var="startYear" value="2017"/>
												<c:set var="sumOfYears" value="${startYear + currYear}"/>
									            <c:forEach var="i" begin="${startYear}" end="${currYear}" step="1">
													<c:set var="yearsDescending" value="${sumOfYears-i}"/>
									                <option value="${yearsDescending}" ${yearsDescending eq selYear ? "selected" : ''}>${yearsDescending}</option>
									            </c:forEach>
											</select>
										</div>
									</div>
								</div> 
								<div class="col-md-2 col-sm-2">
									<div class="form-group">
										<label class="col-md-12 required" for="cboMonth">From Month</label>
										<div class="col-md-12">
											<select class="form-control  "  name="reportMonth" id="reportMonth" onchange="getStartAndEndDateOfMonth();" >
												<c:forEach items="${monthList}" var="entry">
													<option value="${entry.key}" ${entry.key eq selMonth ? "selected" :''} >${entry.value}</option>
												</c:forEach>
											</select>
										</div>
									</div>
								</div> 
								<div class="col-md-2 col-sm-2">
									<div class="form-group">
										<label class="col-md-12" for="cboMonth"> To Month</label>
										<div class="col-md-12">
											<select class="form-control "  name="toMonth" id="toMonth" onchange="changeEndDate();">
												<c:forEach items="${monthList}" var="entry">
													<option value="${entry.key}" ${entry.key eq toMonth ? "selected" :''}> ${entry.value}</option>
												</c:forEach>
											</select>
											<!-- <input type="text" class="form-control" id="toMonth" name="toMonth" value="" readonly="readonly"> -->
										</div>
									</div>
								</div> 
								
								<div class="col-md-2 col-sm-2">
									<div class="form-group">
										<label class="col-md-12" for="fromDate"><spring:message code="HR.REIMBURSE.FORM.FROMDATE" /></label>
										<div class="col-md-12">
											<!-- <input type="text" name="startDate" id="startDate" class="form-control jqueryNDatePicker"  placeholder="dd/mm/yyyy" > -->
											<input type="text" class="form-control" id="startDate" name="startDate" value="" readonly="readonly">
										</div>
									</div>
								</div>
								<div class="col-md-2 col-sm-2">
									<div class="form-group">
										<label class="col-md-12 " for="fromDate"><spring:message code="HR.REIMBURSE.FORM.TODATE" /></label>
										<div class="col-md-12">
											<!-- <input type="text" name="endDate" id="endDate" class="form-control jqueryNDatePicker"  placeholder="dd/mm/yyyy" > -->
											<input type="text" class="form-control" id="endDate" name="endDate" value="" readonly="readonly">
										</div>
									</div>
								</div>
							</div>
							
							<div class="row">
							<%-- <div class="col-md-2 col-sm-2">
									<div class="form-group">
										<label class="col-md-12" for="inputDefault"><spring:message code="LABEL.CONTRA.VOUCHER.COMPANY"/></label>
										<div class="col-md-12">
											<select class="form-control form-select selectpicker" data-live-search="true" name="company" id="companyId1" >
												<option value=""><spring:message code="COMMON.LABEL.DROPDOWN.CORPORATE"/></option>
												<c:forEach items="${officeList}" var="officeList">
													<c:if test="${officeList.officeMasterId eq selOffice}">>
														<c:set var="divCodeName" value="Division : &nbsp; (${officeList.officeCode})  ${officeList.officeName}"></c:set>
													</c:if>
													<option value="${officeList.officeMasterId}" ${officeList.officeMasterId eq selOffice ?  "selected" :''}>${officeList.officeCode} | ${officeList.officeName}</option>
												</c:forEach>
							 			 	</select>
										</div>
									</div>
								</div>  --%>
								<%-- <div class="col-md-2 col-sm-2">
									<div class="form-group">
										<label class="col-md-12" for="inputDefault">Module Code</label>
										<div class="col-md-12">
											<select class="form-control form-select selectpicker" data-live-search="true" name="moduleCode" id="moduleCode" >
					                                <option value="">--ALL--</option>
												    <option value="WT" ${moduleCode eq 'WT' ? 'selected' : ''}>Water</option>
													<option value="OC" ${moduleCode eq 'OC' ? 'selected' : ''}>Office Complex</option>
													<option value="ID" ${moduleCode eq 'ID' ? 'selected' : ''}>ID</option>
													<option value="FIN" ${moduleCode eq 'FIN' ? 'selected' : ''}>Finance</option>
													<option value="APAAWT" ${moduleCode eq 'APAAWT' ? 'selected' : ''}>Apaa Water</option>

											</select>
										</div>
									</div>
								</div> --%>
							</div>
					

					<div class="row">
						<div class="col-md-4 col-sm-4"></div>
						<div class="col-md-4 col-sm-4" style="text-align: center; margin-top: 20px;">
							<input type="button" class="btn btn-submit" value="<spring:message code="COMMON.BUTTON.SEARCH"/>" onclick="showGR1List();" /> 
<!-- 						<a href="../rpt/financeReportList.htm" class="btn btn-danger ">Back</a> -->
						</div>
						<div class="col-md-4 col-sm-4"></div>
					</div>
					<div class="row"></div>
				</form>
							<c:if test="${empty gstr1List}">
								<c:set var="report" value="none"></c:set>
								<c:if test="${type eq 'Post'}">
									<c:set var="list" value="block"></c:set>
								</c:if>
								<c:if test="${type eq 'Get'}">
									<c:set var="list" value="none"></c:set>
								</c:if>
				
								<div class="row" style="display:${list};">
									<div class="col-md-12 col-sm-12">
										<div class="form-group">
											<label class="acct-req-th noDataText"><spring:message code="COMMON.REPORT.NODATA" /></label>
										</div>
									</div>
								</div>
					</c:if>
			<c:if test="${not empty gstr1List}">
				<c:set var="report" value="block"></c:set>
			</c:if>

          <div id="GSTR1Report" style="float:left; display:${report};">
				<hr>
				<div id="report" class="printDiv">
					<div class="row">
					<div class="col-md-12 col-sm-12" style="">
					                <h5 class="text-center">${organisationName}</h5>
					        <%-- <img class="reportLogo" src="../assets/images/Idco-bw-image.jpg" />
					                    <h3 style="font-weight: bold;">
											<spring:message code="COMMON.LABEL.IDCO.TITLE"></spring:message>
										</h3>
										<h4>
											<spring:message code="COMMON.LABEL.IDCO.ADDRESS.TITLE"></spring:message>
										</h4>
	                                    <b> ${R1RptName}</b><br>
	                                 	<b>${divCodeName}</b> --%>
	                                 
					<div class="row">
					            <div class="col-md-6 mb-2" style="">
					            	<strong>For the Month :</strong> &nbsp; ${monthAsMMMinStartDate}&nbsp; ${yearInStartDate}
					            </div>
			                    <div class="col-md-6 mb-2" style="text-align: right;" >
			                    <%-- <strong>GSTIN :</strong> &nbsp; ${selIdcoGSTIN}<br> --%>
					               <c:choose>
					 					<c:when test="${not empty totalTaxableAmt}">
											<strong>Total Taxable Value (Rs.) :</strong>&nbsp; ${utils.convertAmountToINRFormat(totalTaxableAmt)}
										</c:when>
										<c:otherwise>
											<strong>Total Taxable Value (Rs.) :</strong>&nbsp; 0.00
										</c:otherwise>
									</c:choose>
			                    </div>
						<div class="col-md-12 col-sm-12" style="">
							<div class="table-responsive">
							<table class="table table-bordered">
								<thead>
									<tr>
										<th class="text-center" style="min-width:60px;">
											Sl. No
										</th>
										<th style="min-width:200px;">
											GSTIN/UIN of Recipient
										</th>
										<th style="min-width:200px;">
											Receiver Name
										</th>
										<th style="min-width:200px;">
											Invoice No.
										</th>
										<th style="min-width:200px;">
											Invoice Date
										</th>
										<th style="min-width:200px;">
											Final Voucher No.
										</th>
										<th style="min-width:200px;">
											Voucher Date
										</th>
										<th style="text-align: right;min-width:150px;">
											Invoice Value (Rs.)
										</th>
										<th style="min-width:200px;">
											Place of Supply
										</th>
										<th style="text-align: right;min-width:150px;">
											Reverse Charge
										</th>
										<th style="min-width:200px;">
											Invoice Type
										</th>
										<th style="min-width:200px;">
											E-Comm. GSTIN
										</th>
										<th style="text-align: right;min-width:100px;">
											Rate (%)
										</th>
										<th style="text-align: right;min-width:150px;">
											Taxable Value (Rs.)
										</th>

										<th style="text-align: right;min-width:100px;">
											CGST Amt
										</th>
										<th style="text-align: right;min-width:100px;">
											SGST Amt
										</th>
										<th style="text-align: right;min-width:100px;">
											IGST Amt
										</th>

										<th style="text-align: right;min-width:200px;">
											Cess Amt (Rs.)
										</th>
									</tr>
								</thead>
								<c:set var="txblAmt" value="0"></c:set>
								<c:set var="slNo" value="1"></c:set>
								<c:forEach items="${gstr1List}" var="gstr1List">
									<tr>
										<td class="text-center">
											${slNo}
										</td>
										<td class="leftSolidBorder bottomDottedBorder rightDottedBorder">
											<input type="hidden" name="invoiceIdTemp" id="invoiceIdTemp" value="${gstr1List.invoiceId}" />
											${gstr1List.gstNo}
										</td>
										<td class="bottomDottedBorder rightDottedBorder">${gstr1List.partyName}</td>
										<td class="bottomDottedBorder rightDottedBorder">
											<%--  <a href="#" id="invoiceIdpdf" style="font-weight: 600;"
												onclick="invoiceFunction('${gstr1List.voucherId}','${gstr1List.invoiceId}')"
												data-toggle="tooltip" data-placement="top" title="Click to View Invoice">  --%>
												<c:choose>
													<c:when test="${fn:indexOf(gstr1List.finalInvoiceNo, '/') > -1}">
														${gstr1List.finalInvoiceNo}
													</c:when>
													<c:otherwise>
														${gstr1List.officeCode}/${selFinYear}/${gstr1List.finalInvoiceNo}<%-- <fmt:formatNumber pattern="000000" value="${gstr1List.finalInvoiceNo}" /> --%>
<%-- 														${gstr1List.officeCode}/${selFinYear}/${gstr1List.finalInvoiceNo} --%>
													</c:otherwise>
												</c:choose>
											<!-- </a> --> 
										</td>
										<td class="bottomDottedBorder rightDottedBorder">
											 <c:choose>
												<c:when test="${not empty gstr1List.invoiceDate}">
													<fmt:formatDate value="${gstr1List.invoiceDate}" pattern="dd/MM/yyyy" />
												</c:when>
												<c:otherwise>${gstr1List.invoiceDate}</c:otherwise>
											</c:choose>
										</td>
										<td class="bottomDottedBorder rightDottedBorder">
												<c:if test="${not empty gstr1List.finalVoucherNo}">
													<%-- <a href="#" id="invoiceIdpdf" style="font-weight: 600;"
													onclick="invoiceFunction('${gstr1List.paymentInvoiceMaster.voucherTransactionMaster.voucherId},${gstr1List.paymentInvoiceMaster.invoiceId}')"
													data-toggle="tooltip" data-placement="top" title="Click to View Invoice">  --%>
													${gstr1List.finalVoucherNo}
													<!-- </a> -->
												</c:if>
												<c:if test="${empty gstr1List.finalVoucherNo}">
													N/A
												</c:if>
										</td>
										<td class="bottomDottedBorder rightDottedBorder">
											 <c:if test="${not empty gstr1List.voucherApprovedOn}">
												<fmt:formatDate value="${gstr1List.voucherApprovedOn}" pattern="dd/MM/yyyy" />
											</c:if>
											<c:if test="${empty gstr1List.voucherApprovedOn}">
												N/A
											</c:if>
										</td>
										<td style="text-align: right;" class="bottomDottedBorder rightDottedBorder">
										     <c:choose>
												<c:when test="${not empty gstr1List.totalInvoiceAmount}">
													${utils.convertAmountToINRFormat(gstr1List.totalInvoiceAmount)}
												</c:when>
													<c:otherwise>
													0.00
												</c:otherwise>
											</c:choose> 
										</td>
											 <c:choose>
												<c:when test="${empty gstr1List.stateCodeForGst}">
													<td class="bottomDottedBorder rightDottedBorder"></td>
												</c:when>
												<c:otherwise>
													<td class="bottomDottedBorder rightDottedBorder">
														(${gstr1List.stateCodeForGst}) ${gstr1List.stateName}
													</td>
												</c:otherwise>
											</c:choose> 
										<td class="bottomDottedBorder rightDottedBorder">${gstr1List.reverseChargeApplicable}</td>
										<td class="bottomDottedBorder rightDottedBorder">${gstr1List.partyRegdType}</td>
										<td class="bottomDottedBorder rightDottedBorder">${gstr1List.idcoRegdNo}</td>
										<td class="bottomDottedBorder rightDottedBorder">${gstr1List.cgstPerc + gstr1List.sgstPerc}</td>
										<td style="text-align: right;" class="bottomDottedBorder rightDottedBorder">
										 <c:choose>
												<c:when test="${not empty gstr1List.taxableAmount}">
													${utils.convertAmountToINRFormat(gstr1List.taxableAmount)}
												</c:when>
												<c:otherwise>
													0.00
												</c:otherwise>
											</c:choose> 
										</td>

										<c:choose>
											<c:when test="${not empty gstr1List.cgstAmount}">
												<td class="bottomDottedBorder rightDottedBorder" style="text-align: right;">
													${utils.convertAmountToINRFormat(gstr1List.cgstAmount)}
												</td>
											</c:when>
											<c:otherwise>
												0.00
											</c:otherwise>
										</c:choose> 
										 <c:choose>
											<c:when test="${not empty gstr1List.sgstAmount}">
												<td class="bottomDottedBorder rightDottedBorder" style="text-align: right;">
													${utils.convertAmountToINRFormat(gstr1List.sgstAmount)}
												</td>
											</c:when>
											<c:otherwise>
												0.00
											</c:otherwise>
										</c:choose>
										 <c:choose>
											<c:when test="${not empty gstr1List.igstAmount}">
												<td class="bottomDottedBorder rightDottedBorder" style="text-align: right;">
													${utils.convertAmountToINRFormat(gstr1List.igstAmount)}
												</td>
											</c:when>
											<c:otherwise>
												0.00
											</c:otherwise>
										</c:choose> 

										<td style="text-align: right;" class="bottomDottedBorder rightSolidBorder">
											<c:choose>
												<c:when test="${not empty gstr1List.cessAmount}">
													${gstr1List.cessAmount}		
												</c:when>
												<c:otherwise>
													0.00
												</c:otherwise>
											</c:choose> 
										</td>
									</tr>
									<c:set var="slNo" value="${slNo +1}"></c:set>
								</c:forEach>
							</table>
							</div>
						</div>
					</div>
				</div>
				<!-- <div class="row" style="margin-top: 15px;">
					<div class="col-md-12 col-sm-12" style="text-align: right; font-size: 15px; font-weight: bold;"> EXPORT REPORT TO : &nbsp;&nbsp;&nbsp; 
						<img class="exportToPdfLogo" src="../assets/images/ExportToPDF_JPG.jpg" data-toggle="tooltip"     style="width: 30px;"
							data-placement="top" onclick="generateGR1Pdf()" title="Export to PDF" />
						&nbsp;&nbsp;&nbsp; 
						<img class="exportToExcelLogo" src="../assets/images/ExportToExcel_JPG.jpg" style="width: 30px;"
							data-toggle="tooltip" data-placement="top" onclick="generateGR1ExcelReconcile()" title="Export GST R-1 to Excel for Reconciliation" />
						&nbsp;&nbsp;&nbsp; <img class="exportToExcelLogo" src="../assets/images/ExportToExcel_JPG.jpg"
							data-toggle="tooltip" data-placement="top" onclick="generateGR1Excel()" title="Export GST R-1 to Excel for Upload" />
					</div>
				</div> -->
			</div>
			  	</div>
			  </div>
			</div>
		</div>
	</div>
</div>

</section>


























		

			

			<form action="../gstRpt/GR1-PDF.htm" method="post" id="frmGR1Pdf" target="_blank">
				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
					<input type="hidden" name="reportToMonth" id="reportMonthPDF" value="" /> 
					<input type="hidden" name="moduleCodeEx" id="moduleCodeEx3" value="" /> 
					<input type="hidden" name="startDate" id="startDate1" /> 
					<input type="hidden" name="endDate" id="endDate1" /> 
					<input type="hidden" name="company" id="officeId1" /> 
					<input type="hidden" name="reportFinYr" id="reportFinYr" value="${selFinYear}" /> 
					<input type="hidden" name="reportMonth" id="reportMonth" value="${monthAsMMMinStartDate}" />
					<input type="hidden" name="reportYear" id="reportYear" value="${yearInStartDate}" /> 
					<input type="hidden" name="selIdcoGstNo" id="selIdcoGstNo" value="${selIdcoGSTIN}" /> 
					<input type="hidden" name="R1RptType" id="R1RptTypePdf" value="${R1RptType}" /> 
					<input type="hidden" name="idcoGSTIN" id="idcoGSTIN" value="${idcoGSTIN}" />
			</form>
			<form action="../gstRpt/generateTaxInvoicePDF.htm" method="post" id="frmInvoicePDF" target="_blank">
				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
					<input type="hidden" name="invoiceId" id="invoiceId" /> 
					<input type="hidden" id="hdnInvoiceType" name="invoiceType" value="" />
			</form>
			<form action="../gstRpt/GR1-Excel.htm" method="post" id="generateExcel" target="_blank">
				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
					<input type="hidden" name="reportToMonth" id="reportMonthEx1" value="" /> 
					<input type="hidden" name="moduleCodeEx" id="moduleCodeEx1" value="" /> 
					<input type="hidden" name="companyPdf" value="${selOffice}" /> 
					<input type="hidden" name="startDatePdf" value="${startDate}" /> 
					<input type="hidden" name="endDatePdf" value="${endDate}" /> 
					<input type="hidden" name="reportFinYr" id="reportFinYr" value="${selFinYear}" /> 
					<input type="hidden" name="R1RptType" id="R1RptTypeExcel" value="${R1RptType}" /> 
					<input type="hidden" name="reportTypeOne" id="reportTypeOne" value="GST_R1" />
					<input type="hidden" name="reportTypeTwo" id="reportTypeTwo" value="${R1RptType}" />
					<input type="hidden" name="idcoGSTIN" id="idcoGSTIN" value="${idcoGSTIN}" /> 
					<input type="hidden" name="reportMonth" id="reportMonth" value="${monthAsMMMinStartDate}" /> 
					<input type="hidden" name="reportYear" id="reportYear" value="${yearInStartDate}" />
			</form>
			<form action="GR1-Excel.htm" method="post" id="generateExcelReconsile" target="_blank">
				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
				
					<input type="hidden" name="reportToMonth" id="reportMonthEx2" value="" /> 
					<input type="hidden" name="moduleCodeEx" id="moduleCodeEx2" value="" /> 
					<input type="hidden" name="companyPdf" value="${selOffice}" /> 
					<input type="hidden" name="startDatePdf" value="${startDate}" /> 
					<input type="hidden" name="endDatePdf" value="${endDate}" /> 
					<input type="hidden" name="reportFinYr" id="reportFinYr" value="${selFinYear}" /> 
					<input type="hidden" name="R1RptType" id="R1RptTypeExcel" value="${R1RptType}" /> 
					<input type="hidden" name="reportMonth" id="reportMonth" value="${monthAsMMMinStartDate}" /> 
					<input type="hidden" name="reportYear" id="reportYear" value="${yearInStartDate}" /> 
					<input type="hidden" name="reportTypeOne" id="reportTypeOne" value="GST_R1_RECONSILE" />
					<input type="hidden" name="reportTypeTwo" id="reportTypeTwo" value="${R1RptType}" /> 
					<input type="hidden" name="idcoGSTIN" id="idcoGSTIN" value="${idcoGSTIN}" />
			</form>

<form action="../miscVouchersPDF.htm" method="POST" id="generatepdf" target="_blank">
	<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
	<input type="hidden" id="printVoucherId" name="printVoucherId" />
	<input type="hidden" name="voucherType" value="FINANCE"/>	  
</form>






<!-- Button trigger modal -->

<!-- Modal -->
<div class="modal fade" id="invoiceModalId" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Send Request</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
           <div class = "row">
					<div class="col-md-12">
					<input type="hidden" id="invoiceHdnId" name="invoiceHdnId" value="">
			<input type="hidden" id="voucherHdnId" name="voucherHdnId" value="">
						<label>Please select what to view..</label>
					</div>
				</div>
      </div>
      <div class="modal-footer">
              <button type="button" class="btn btn-info" onclick="generateInvoicePDF();">
					Tax Invoice
				</button>
				<button type="button" class="btn btn-primary" onclick="generateVoucherPDF();">
					Voucher
				</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
$(document).ready(function()
{
	getStartAndEndDateOfMonth();
});


function selectPdfViewType(invoiceId)
{
	bootbox.confirm({
        title : "View Type",
        message : "Please select what to view.",
        buttons : {
            confirm : {label : "Receipt Voucher", className: "btn-success"},
            cancel : {label : "Tax Invoice", className: "btn-teal"}
        },
        callback: function(result) 
        {
        	
        	if (result == true) 
			{
        		generateVoucherPDF();
			}
        	else
        	{
        		generateInvoicePDF();
        	}
        }
	});
}


function showGR1List()
{
	$("#officeId2").val($("#companyId1").val());
	//showAjaxLoader();
	$("#rptGSTR1").submit();
}

function generateGR1Pdf()
{
	$("#startDate1").val($("#startDate").val());
	$("#endDate1").val($("#endDate").val());
	$("#officeId1").val($("#companyId1").val());
	var moduleCode = $("#moduleCode").val();
	$("#moduleCodeEx3").val(moduleCode);
	$("#reportMonthPDF").val($("#toMonth").val());
	$("#frmGR1Pdf").submit();
}

function generateInvoicePDF()
{
debugger;
	var invoiceId  = $("#invoiceHdnId").val();
	$("#invoiceId").val(invoiceId);
	$("#frmInvoicePDF").submit();
}

function generateVoucherPDF()
{
	debugger;
	if($("#voucherHdnId").val() == "") {
		bootbox.alert("Voucher details not available..!!");
	}
	else{
		$("#printVoucherId").val($("#voucherHdnId").val());
		$("#generatepdf").submit();
	}
	
}

function getStartAndEndDateOfMonth()
{
	var month = $("#reportMonth").val();
	var year = $("#reportYear").val();
	var toMonth = $("#toMonth").val();
	var type = "${type}";
	if($('#reportMonth').val() !="" && $('#reportYear').val())
	{
		$.ajax({
			url : '../gstRpt/getStartAndEndDateOfMonth.htm',
	 	    type:'GET',
	 	    data : ({
	 	    	month : month,
	 	    	year : year,
	 	    	type :type,
	 	    	toMonth : toMonth,
	 	    }),
			cache:false,
			asynch:false,
			success : function(response) 
			{
				if(response!=null)
				{
					var value = [];
					var value = response.split("#");
					document.getElementById("startDate").value = value[0];
					document.getElementById("endDate").value = value[1];
					document.getElementById("toMonth").value = value[2];
				} 
			}
		});
	}
	else
	{
		document.getElementById("startDate").value = "";
		document.getElementById("endDate").value = "";
	}
}
function generateGR1Excel()
{
	var moduleCode = $("#moduleCode").val();
	$("#moduleCodeEx1").val(moduleCode);
	$("#reportMonthEx1").val($("#toMonth").val());
	$('#generateExcel').submit();
}
function generateGR1ExcelReconcile()
{
	var moduleCode = $("#moduleCode").val();
	$("#moduleCodeEx2").val(moduleCode);
	$("#reportMonthEx2").val($("#toMonth").val());
	$('#generateExcelReconsile').submit();
}
function changeEndDate(){
	
	var endMonth = $("#toMonth").val();
	var year = $("#reportYear").val();
	$.ajax({
		url : '../gstRpt/getEndDateOfToMonth.htm',
 	    type:'GET',
 	    data : ({
 	    	month : endMonth,
 	    	year : year,
 	    }),
		cache:false,
		asynch:false,
		success : function(response) 
		{
			if(response!=null)
			{
				$("#endDate").val(response);
			} 
		}
	});
	
}

function invoiceFunction(voucher, InvoiceId) {
    debugger;
    
    // Set the voucher and InvoiceId values
    $("#voucherHdnId").val(voucher);
    $("#invoiceHdnId").val(InvoiceId);
    
    // Show the Bootstrap modal
    $('#invoiceModalId').modal('show');
}

</script>

