<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />

<style>
.alert {
	box-shadow: none;
}

.alert-info {
	border-left: 6px solid #48ABF7
}
</style>

<style type="text/css">
	.l-hide-tab tfoot tr td:last-child {
		display: none;
	}

	.nav-toggle {
		display: none;
	}

	.sidebar.sidebar-style-2 {
		display: none;
	}

	label {
		font-weight: 600;
	}

	.main-panel>.content {
		padding: 0 px !important;
		min-height: calc(100% - 123 px);
		margin-top: 0;
		overflow: hidden;
	}
	.forgot-page {
height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #dedede;
    }
    .box {
      background: #fff;
    padding: 20px 15px 30px 15px;
    border-radius: 10px;
    }
     .box h4 {
   padding: 15px;
    color: #9a001f;
    }
</style>


<section class="forgot-page">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-4">
					<div class="box">
					<h4>Forgot Password</h4>
			 <%@ include file="/WEB-INF/views/message.jsp" %> 
				<form class="form-horizontal" id="formId" action="${contextPath}/public/forgot/password/filter" method="POST" onsubmit="saveFormSubmit()">
					<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
						<div class="row">
									<div class="col-md-12">
										<div class="form-group">
											<label class="col-md-12">User Name: </label>
											<div class="col-md-12">
												<input type="text" class="form-control form-control-sm"
													name="userName" id="userName" maxlength="50" required>
											</div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<label class="col-md-12">Email Id: </label>
											<div class="col-md-12">
												<input type="text" class="form-control form-control-sm"
													name="emailId" id="emailId" maxlength="50"
													onchange="validateEmailId(this)" required="required">
											</div>
										</div>
										<!-- </div> -->
									</div>	
						<div class="col-md-12 text-center mt-3">
							<input type="submit" class="btn btn-success btn-sm"
								value="Submit" /> <a href="${contextPath}/" type="button"
								class="btn btn-warning btn-sm">Back</a>
						</div>
					</div>
				</form>
			
							</div>
			</div>
		</div>
	</div>
</section>
<script>

function saveFormSubmit() {
	if($("#userName").val()==""){
		bootbox.alert("Please enter user name");
		return false;
	}else if($("#emailId").val()==""){
		bootbox.alert("Please enter email Id");
		return false;
	}else{
		var fieldId = "emailId";
		var validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
		if (!$("#" + fieldId).val().match(validRegex)) {
			bootbox.alert("Please provide valid email id.");
			//$("#"+fieldId).val("");
			$("#" + fieldId).focus();
			return false;
		}else{
			$("#formId").submit();		
		}
		
		
	}
	
}

function validateEmailId(value) {
	var fieldId = value.id;
	var validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;

	if (!$("#" + fieldId).val().match(validRegex)) {
		bootbox.alert("Please provide valid email id.");
		//$("#"+fieldId).val("");
		$("#" + fieldId).focus();
		return false;
	}

}
 </script>