<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix = "fn" uri = "http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/functions" prefix = "fn" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />
<script src="${contextPath}/assets/appJs/validation/common-utils.js"></script>
<sec:authentication var="principal" property="principal" />
<c:set var="roleCode" value="${principal.primaryRole.roleCode}"/>
 
 
 
<div class="breadcrumb_conatiner">
              <div class="col-md-6">
                <h4 class="change-color">Facility Report</h4>
              </div>
              <div class="col-md-6">
                <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="${contextPath}/home"><i class="fa fa-home"></i></a></li>
                    <li class="breadcrumb-item active" aria-current="page">Facility Report</li>
                </ol>
                </nav>
              </div>
            </div>
            

<div class="card cardContainerNotFirst">
 <div class="card-header"><h5 class="card-title">Facility Report</h5></div>
	 <div class="card-body">

 <form action="${contextPath}/facility/clgWiseFacilityAndAmenitiesReport" method="post" id="filterFormId" class="row">
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
        
        <div class="form-group col-md-2">
			<label class="required" >College :</label>
			<select class="form-select" id="collegeIdId" name="collegeId" >
				<option value=""><spring:message code="label.common.select"></spring:message></option>
				<option value="0">All</option>
				<c:forEach items="${clgList}" var="collegeList">
					<option value="${collegeList.collegeId}" ${collegeList.collegeId eq collegeId ? 'selected':''}>${collegeList.collegeName}</option>
				</c:forEach>
			</select>
		</div>
		
        <div class="form-group col-md-4 text-left">
            <button type="button" class="btn btn-submit searchdiv" style="margin-left: 8px;" onclick="submitForm()" >Filter</button>
            <button type="button" class="btn btn-back searchdiv" style="margin-left: 8px;" onclick="history.back()">Back</button>
        </div>
    </form>
    </div>
    

<div class="card cardContainerNotFirst">
 <div class="card-header"><h5 class="card-title">Facilities List</h5></div>
	 <div class="card-body">
		<table class="datatable table table-striped table-bordered exportbtn">
		<thead>
		        <tr>
		            <th>Sl.No</th>
		            <th>College Name</th>
		            <th>Parking Space</th>
		            <th>Boundary Wall</th>
		            <th>Internet Connectivity</th>
		        </tr>
	    	</thead>
	    	<tbody>
		        <c:forEach items="${clgWiseCommonFacilitiesList}" var="clgWiseCommonFac" varStatus="count">
		            <tr>
		                <td>${count.count}</td>
		                <td><a href="#" onclick="getFacilityAndAmenitiesDetailsDataByClg(${clgWiseCommonFac.clgId});">${clgWiseCommonFac.clgName}</a></td>
		                <td>${clgWiseCommonFac.parkingSpace}</td>
		                <td>${clgWiseCommonFac.boundaryWall ? 'Yes' : 'No'}</td>
		                <td>${clgWiseCommonFac.internetConnectivity ? 'Yes' : 'No'}</td>
		            </tr>
		        </c:forEach>
	    	</tbody>
		</table>
	</div>
</div>
</div>

<form action="${contextPath}/facility/getFacAmenitiesDtlsDataByClg" id="formID" method="get">
<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
<input type="hidden" id="clgIdId" name="clgId">
</form>

<script>

function getFacilityAndAmenitiesDetailsDataByClg(id) {
	$("#clgIdId").val(id);
	showLoader();
    $("#formID").submit();
}

function submitForm() {
	showLoader();
    $("#filterFormId").submit();
}

</script>


