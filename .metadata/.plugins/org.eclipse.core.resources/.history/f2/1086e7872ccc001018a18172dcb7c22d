<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>


<c:set var="contextPath" value="${pageContext.request.contextPath}" />
<sec:authentication var="principal" property="principal" />

<style>
	.user-details-div {
	}
	.user-details-label {
		color: #fff;
		font-size: 12px;
		font-weight: 500;
	}
	.user-info-span {
		color: #fff200;
		font-size: 14px;
		font-weight: 600;
	}
	.view-profile-href {
		font-size: 12px;
		font-weight: 500;
		color: #f60ceb;
	}
</style>


<!-- <nav class="navbar navbar-expand-lg navbar-dark headertop"> -->
<!-- 	<div class="container-fluid"> -->
<%-- 		<img src="${contextPath}/assets/img/connect-logo.png" class="img-fluid" style="width: 100px;"> --%>

<!-- 		<div class="col-md-7 user-details-div"> -->
<!-- 			<label class="col-md-12 text-center user-details-label"> -->
<%-- 				<span class="user-info-span">${principal.dbUser.firstName} ${principal.dbUser.lastName}</span> &nbsp; --%>
<%-- 				(${_Sesn_Designation}, &nbsp;${_Sesn_Department})<br>${_Sesn_CollegeName} --%>
<!-- 			</label> -->
<!-- 		</div> -->

<!-- 		<div class="collapse navbar-collapse col-md-2 rightlistmenu" style="max-width: 5%;"> -->
<!-- 			<ul class="navbar-nav mb-2 mb-lg-0" style=""> -->

<!-- 				========================================  NOTIFICATION BELL ======================================== -->
<!-- 				<li class="nav-item dropdown notificationbtn" style="display: none;"> -->
<!-- 					<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> -->
<%-- 						<img src="${contextPath}/assets/img/notification.png" alt="Notifications" /> --%>
<!-- 					</a> -->
<!-- 					<ul class="dropdown-menu"> -->
<!-- 						<li><a class="dropdown-item" href="#">Action</a></li> -->
<!-- 						<li><a class="dropdown-item" href="#">Another action</a></li> -->
<!-- 						<li><hr class="dropdown-divider" /></li> -->
<!-- 						<li><a class="dropdown-item" href="#">Something else here</a></li> -->
<!-- 					</ul> -->
<!-- 				</li> -->

<!-- 				========================================  PROFILE ICON ======================================== -->
<!-- 				<li class="nav-item dropdown userbtn"> -->
<!-- 					<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> -->
<%-- 						<img src="${contextPath}/assets/img/user.png" alt="User"/> --%>
<!-- 					</a> -->
<!-- 					<ul class="dropdown-menu" style="left: -10em;"> -->
<!-- 						<li style="margin-right: 0; margin-top: 0px;"> -->
<!-- 							<div class="user-box"> -->
<%-- 								<div class="avatar-lg"><img src="${contextPath}/assets/img/profile_image.jpeg" alt="image profile" class="avatar-img rounded"></div> --%>
<!-- 								<div class="u-text"> -->
<%-- 									<h4>${principal.dbUser.firstName} ${principal.dbUser.lastName}</h4> --%>
<%-- 									<p class="text-muted" style="font-size: 11px;">${principal.dbUser.designation}</p> --%>
<%-- 									<p class="text-muted"></p><a href="${contextPath}/umt/user/profile" class="view-profile-href">View Profile</a> --%>
<!-- 								</div> -->
<!-- 							</div> -->
<!-- 						</li> -->
<!-- 						<li style="margin-top: 0px;"> -->
<!-- 							<div class="dropdown-divider"></div> -->
<%-- 							<a class="dropdown-item" href="${contextPath}/umt/user/change/password"> --%>
<!-- 								<i class="fa fa-key" style="margin-right: 6px; font-size: 14px;"></i>Change Password -->
<!-- 							</a> -->
<!-- 							<div class="dropdown-divider"></div> -->
<!-- 							<a class="dropdown-item" href="#" id="switchlogout"> -->
<!-- 								<i class="fa fa-sign-out" style="margin-right: 6px; font-size: 17px;"></i>Logout -->
<!-- 							</a> -->
<!-- 						</li> -->
<!-- 					</ul> -->
<!-- 				</li> -->
<!-- 			</ul> -->
<!-- 		</div> -->
<!-- 	</div> -->
<!-- </nav> -->

 <section class="main-header">
	<div class="home-content">
		<div class="logo-box d-flex align-items-center">
			<div class="img_con"><img src="${contextPath}/loginPage/images/odishaLogo.svg"></div>
			<div class="img_con logo"><img src="${contextPath}/loginPage/images/himsLogo.svg" class="img-fluid" /></div>
              
			<div class="d-flex flex-column module_text">
				<span>${applicationCode eq 'UAS'?'University Automation System':'Higher Education Information and Management System'}</span>
				<p> <small>${applicationCode eq 'UAS'?'ବିଶ୍ୱବିଦ୍ୟାଳୟ ସ୍ୱୟଂଚାଳିତ ବ୍ୟବସ୍ଥା ':'Higher Education Department, Govt. of Odisha'}</small></p>
			</div>
		</div>
          <form class="form-main row">
            
              
              
              <%-- <c:if test="${principal.dbUser.primaryRole.roleCode ne 'ROLE_ADMIN'}">
					<c:if test="${not empty principal.dbUser.userType or principal.dbUser.userType ne null}">
						<div class="col-md-12">
							<div class="form-group d-flex align-items-center">
				                <label style="font-size: 14px; color: #fff; margin-right:2px;">Role</label>
				                <select class="form-control form-control-sm" id="userRoleMap" name="userRoleMap" required onchange="submitForm();" style="font-size: 12px;border-radius: 5px !important; height: 32px !important; background: #00362f; color: #fff; border: #f25e0a 2px solid;width: 150px;">
				                  <c:if test="${accessList.data.size() gt 1}">
											<option value="">- Select -</option>
										</c:if>
										<c:forEach items="${accessList.data}" var="access">
											<option value="${access.id}" ${access.id eq userRoleMapId ? 'selected':'' }>${access.name}</option>
										</c:forEach>
				                </select>
				              </div>
							</div>
						</c:if>
					</c:if> --%>

          </form>
		<ul class="header_right d-flex align-items-center justify-content-start">
			<!--<li><div class="notificationtop" style="color:#fff"><i class="bx bx-chat" style="font-size: 26px; margin-left: 12px; margin-right: 2px;"></i><span style="background-color: #ffed14;font-size: 11px;color: #181d77;padding: 3px 5px 2px 3px;border-radius: 5px;font-weight: 600;position: relative; top: -10px;">13</span></div></li>-->
			<li>
				<div class="notificationtop">
					<a href="#" class="btn btn-sm" id="switchlogout">
                    	<i class="fa-solid fa-power-off"></i>
                  	</a>
                </div>
            </li>
		</ul>
	</div>
</section>


<form method="post" action="${contextPath}/back-to-sso" id="frmLogout">
	<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" /> 
	<input type="submit" style="display: none" />
</form>

<script>
	$(function() {
		$('#siteLangSelector').change(function() {
			const lang = $(this).val();
			switchLanguage(lang);
		});
	});

	$('#switchlogout').on('click', function() {
		bootbox.confirm("Are you sure you want to logout ?",function(result){
			if(result){
				showLoader();
				$("#frmLogout").submit();
			}
		});
	});

	$('#logoutFromMenu').on('click', function() {
		bootbox.confirm("Are you sure you want to logout ?",function(result){
			if(result){
				showLoader();
				$("#frmLogout").submit();
			}
		});
	});

	$("#langId1").change(function(){
		$('#lang').val(this.value);
		$('#change-lang').submit();
	});
		
</script>

